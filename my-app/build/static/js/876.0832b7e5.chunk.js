/*! For license information please see 876.0832b7e5.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[876],{719:(e,s,a)=>{a.d(s,{A:()=>t});const t=(0,a(784).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},784:(e,s,a)=>{a.d(s,{A:()=>d});var t=a(43);const r=e=>{const s=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,((e,s,a)=>a?a.toUpperCase():s.toLowerCase())))(e);return s.charAt(0).toUpperCase()+s.slice(1)},n=function(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return s.filter(((e,s,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===s)).join(" ").trim()},c=e=>{for(const s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l=(0,t.forwardRef)(((e,s)=>{let{color:a="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:o="",children:h,iconNode:m,...u}=e;return(0,t.createElement)("svg",{ref:s,...i,width:r,height:r,stroke:a,strokeWidth:d?24*Number(l)/Number(r):l,className:n("lucide",o),...!h&&!c(u)&&{"aria-hidden":"true"},...u},[...m.map((e=>{let[s,a]=e;return(0,t.createElement)(s,a)})),...Array.isArray(h)?h:[h]])})),d=(e,s)=>{const a=(0,t.forwardRef)(((a,c)=>{let{className:i,...d}=a;return(0,t.createElement)(l,{ref:c,iconNode:s,className:n(`lucide-${o=r(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...d});var o}));return a.displayName=r(e),a}},876:(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});var t=a(43),r=a(719),n=a(784);const c=(0,n.A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),i=(0,n.A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var l=a(678),d=a(579);const o=e=>{let{studentId:s,instituteId:a,onClose:n,selectedContactName:o}=e;const[h,m]=(0,t.useState)([]),[u,p]=(0,t.useState)(""),[g,f]=(0,t.useState)(!0),[y,x]=(0,t.useState)(null),N=(0,t.useCallback)((async()=>{if(!s||!a)return x("Student and Institute IDs are required."),void f(!1);f(!0);try{const e=await l.A.get(`/messages/${s}/${a}`);if(!e.data.success)throw new Error(e.data.message||`Failed to fetch messages: ${e.status}`);m(e.data.messages||[])}catch(e){x(e.message||"An error occurred while fetching messages.")}finally{f(!1)}}),[s,a]);(0,t.useEffect)((()=>{N()}),[N]);const v=(0,t.useCallback)((async()=>{if(u.trim()&&s&&a&&o)try{const e={senderId:s,senderType:"student",senderName:"You",receiverId:a,receiverName:o,message:u,receiverType:"institute"},t=await l.A.post("/messages",e);if(!t.data.success)throw new Error(t.data.message||"Failed to send message");m((e=>[...e,t.data.message])),p("")}catch(e){x(e.message||"Failed to send message.")}}),[u,s,a,o]);return g?(0,d.jsx)("div",{className:"chat-box-loading",children:(0,d.jsx)("p",{children:"Loading messages..."})}):y?(0,d.jsxs)("div",{className:"chat-box-error",children:[(0,d.jsx)(r.A,{className:"error-icon"}),(0,d.jsxs)("p",{children:["Error: ",y]})]}):(0,d.jsxs)("div",{className:"chat-box",children:[(0,d.jsxs)("div",{className:"chat-header",children:[(0,d.jsxs)("h2",{className:"chat-title",children:["Chat with ",o]}),(0,d.jsx)("button",{className:"close-chat-btn",onClick:n,children:(0,d.jsx)(c,{})})]}),(0,d.jsx)("div",{className:"message-list",children:h.map(((e,a)=>(0,d.jsxs)("div",{className:"message "+(e.senderId===s?"sent":"received"),children:[(0,d.jsx)("p",{className:"message-content",children:e.message}),(0,d.jsx)("span",{className:"message-sender",children:e.senderId===s?"You":e.senderName})]},a)))}),(0,d.jsxs)("div",{className:"input-area",children:[(0,d.jsx)("textarea",{value:u,onChange:e=>{p(e.target.value)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),v())},placeholder:"Type your message...",className:"message-input",rows:1}),(0,d.jsx)("button",{className:"send-button",onClick:v,children:(0,d.jsx)(i,{})})]})]})}}}]);
//# sourceMappingURL=876.0832b7e5.chunk.js.map